# SPDX-FileCopyrightText: (c) UIUC PurpCode Team
#
# SPDX-License-Identifier: Apache-2.0

import matplotlib.pyplot as plt
from matplotlib.colors import to_rgba

from script.venn4py import venny4py

DATA = {
    r"Ours": {
        "19": 50,
        "20": 305,
        "22": 341,
        "23": 208,
        "36": 208,
        "73": 208,
        "74": 7,
        "77": 1478,
        "78": 1478,
        "79": 254,
        "80": 146,
        "88": 1478,
        "89": 141,
        "90": 56,
        "93": 90,
        "94": 670,
        "95": 67,
        "99": 208,
        "113": 2,
        "116": 181,
        "117": 139,
        "155": 52,
        "185": 1,
        "186": 1,
        "190": 50,
        "200": 68,
        "202": 52,
        "209": 119,
        "215": 217,
        "255": 50,
        "258": 17,
        "259": 80,
        "266": 248,
        "269": 53,
        "285": 50,
        "287": 70,
        "295": 59,
        "311": 170,
        "312": 224,
        "315": 32,
        "319": 225,
        "321": 80,
        "322": 4,
        "326": 6,
        "327": 516,
        "328": 439,
        "349": 49,
        "352": 58,
        "359": 156,
        "377": 128,
        "390": 653,
        "396": 445,
        "400": 1120,
        "409": 58,
        "434": 135,
        "477": 27,
        "489": 217,
        "497": 119,
        "502": 179,
        "521": 121,
        "522": 52,
        "532": 127,
        "561": 655,
        "563": 1020,
        "570": 57,
        "571": 57,
        "581": 1,
        "584": 5,
        "601": 78,
        "611": 26,
        "614": 89,
        "628": 4,
        "643": 54,
        "664": 1100,
        "665": 44,
        "668": 137,
        "685": 6,
        "687": 7,
        "730": 19,
        "732": 278,
        "772": 622,
        "776": 6,
        "798": 218,
        "827": 12,
        "916": 161,
        "918": 24,
        "942": 58,
        "1004": 66,
        "1275": 66,
        "1333": 15,
    },
    r"\textsc{CodeLMSec}": {
        "20": 12,
        "22": 24,
        "78": 12,
        "79": 12,
        "89": 12,
        "94": 12,
        "117": 12,
        "190": 12,
        "327": 12,
        "476": 12,
        "502": 12,
        "601": 12,
        "611": 12,
        "732": 12,
        "787": 12,
    },
    r"\textsc{SecCodePLT}": {
        "22": 70,
        "74": 60,
        "77": 51,
        "78": 50,
        "79": 51,
        "94": 51,
        "95": 51,
        "120": 50,
        "200": 51,
        "281": 50,
        "295": 51,
        "327": 50,
        "338": 51,
        "347": 51,
        "352": 40,
        "367": 51,
        "400": 51,
        "502": 51,
        "601": 51,
        "611": 51,
        "732": 51,
        "770": 51,
        "862": 51,
        "863": 41,
        "915": 31,
        "918": 51,
        "1333": 36,
    },
    r"\textsc{CWEval}": {
        "1333": 1,
        "20": 1,
        "918": 2,
        "732": 1,
        "95": 1,
        "347": 1,
        "329": 1,
        "327": 3,
        "22": 2,
        "326": 2,
        "400": 1,
        "79": 1,
        "943": 1,
        "78": 1,
        "502": 1,
        "643": 1,
        "760": 1,
        "113": 1,
        "377": 1,
        "117": 1,
    },
}

# Set up LaTeX rendering
plt.rcParams.update(
    {
        "text.usetex": True,
        "font.family": "serif",
        "font.serif": ["Computer Modern Roman"],
        "legend.loc": "lower center",
    }
)

fig, ax = plt.subplots(1, 1, figsize=(4, 4))

type2set = {k: set(v.keys()) for k, v in DATA.items()}


colors = [
    to_rgba("#3274A1", 0.25),  # Blue
    to_rgba("#E1812C", 0.25),  # Orange
    to_rgba("#3A923A", 0.25),  # Green
    to_rgba("#C03D3E", 0.25),  # Red
]

print(type2set)
venny4py(type2set, ax, font_size=12, legend_cols=2, column_spacing=0.5, colors=colors)

# save
plt.savefig("cwevenn.png", dpi=300, bbox_inches="tight", pad_inches=-0.05)
plt.savefig("cwevenn.pdf", dpi=300, bbox_inches="tight", pad_inches=-0.05)
